# LangGraph λ©€ν‹° μ—μ΄μ „νΈ μ•„ν‚¤ν…μ² λ³€κ²½ λ¬Έμ„

> μ‘μ„±μΌ: 2025-12-19
> ν”„λ΅μ νΈ: LangGraph Web UI - Deep Research System

---

## 1. μ•„ν‚¤ν…μ² λ³€κ²½ κ°μ”

### λ³€κ²½ μ΄μ 

| λ¬Έμ  | μ›μΈ | ν•΄κ²° |
|------|------|------|
| μ–•μ€ κ²€μƒ‰ | 1ν κ²€μƒ‰λ§ μν–‰ | λ°λ³µ κ²€μƒ‰ λ£¨ν”„ μ¶”κ°€ |
| URL λ‚΄μ© λ―Έν™•μΈ | Tavily μ”μ•½λ§ μ‚¬μ© | ContentReader λ¶„λ¦¬ |
| μ—­ν•  νΌμ¬ | Supervisorκ°€ λ¨λ“  κ²°μ • | μ „λ¬Έν™”λ λ…Έλ“λ΅ λ¶„λ¦¬ |
| λΉμ•½ν• μ‘λ‹µ | κ²€μƒ‰β†’μ‘λ‹µ μ§ν–‰ | Analyzerλ΅ ν’μ§ κ΄€λ¦¬ |

---

## 2. μ΄μ „ μ•„ν‚¤ν…μ² (3λ…Έλ“)

```
               β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
               β”‚  Supervisor β”‚ β† λΌμ°ν„° + κ²°μ •μ
               β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”
                      β”‚
         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β–Ό            β–Ό            β”‚
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β”‚
   β”‚Researcherβ”‚  β”‚  Writer  β”‚ β”€β”€β”€β”€β”€β”
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
        β”‚             β”‚
     κ²€μƒ‰+μ‘λ‹µ      κΈ€ μ •λ¦¬
```

### λ…Έλ“λ³„ μ—­ν• 

| λ…Έλ“ | μ—­ν•  | μ±…μ„ |
|------|------|------|
| **Supervisor** | λΌμ°ν„° | λ‹¤μ λ…Έλ“ κ²°μ • (Researcher/Writer/FINISH) |
| **Researcher** | κ²€μƒ‰ + μ”μ•½ | Tavily κ²€μƒ‰, κ²°κ³Ό μ •λ¦¬, (URL μ½κΈ° μ‹λ„) |
| **Writer** | μµμΆ… μ‘λ‹µ | Researcher κ²°κ³Όλ¥Ό ν•κµ­μ–΄λ΅ μ •λ¦¬ |

### μ¥μ 
- β… **λ‹¨μν•¨**: 3κ° λ…Έλ“λ΅ μ΄ν•΄ν•κΈ° μ‰¬μ›€
- β… **λΉ λ¥Έ μ‘λ‹µ**: κ²€μƒ‰ β†’ Writer μ§ν–‰
- β… **κµ¬ν„ κ°„νΈ**: μ½”λ“λ‰ μ μ

### λ‹¨μ 
- β **μ—­ν•  νΌμ¬**: Supervisorκ°€ λ„λ¬΄ λ§μ€ μ—­ν• 
- β **μ–•μ€ λ¦¬μ„μΉ**: λ°λ³µ κ²€μƒ‰ λ©”μ»¤λ‹μ¦ μ·¨μ•½
- β **URL λ―Έν™μ©**: Tavily μ”μ•½λ§ μ‚¬μ©, λ³Έλ¬Έ λ―Έν™•μΈ
- β **ν’μ§ κ΄€λ¦¬ λ¶€μ¬**: μ •λ³΄ μ¶©λ¶„ μ—¬λ¶€ νλ‹¨ μ—†μ
- β **λ¬΄ν• λ£¨ν”„ μ„ν—**: μ•μ „ μ¥μΉ λ³µμ΅

---

## 3. μƒ μ•„ν‚¤ν…μ² (5λ…Έλ“ Deep Research)

```
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ Planner β”‚ β† λ¦¬μ„μΉ μ „λµ μλ¦½
  β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”
       β”‚
       β–Ό
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ Searcher β”‚ β† μ›Ή κ²€μƒ‰ (Tavily)
  β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”
       β”‚
       β–Ό
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ContentReader β”‚ β† URL μƒμ„Έ λ‚΄μ© μ½κΈ°
  β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
         β”‚
         β–Ό
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ Analyzer β”‚β”€β”€β”€β–¶β”‚ Searcher β”‚ (μ¶”κ°€ κ²€μƒ‰)
  β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚ (μ¶©λ¶„)
       β–Ό
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ Writer β”‚ β† μµμΆ… μ‘λ‹µ μ‘μ„±
  β””β”€β”€β”€β”€β”¬β”€β”€β”€β”
       β–Ό
     [END]
```

### λ…Έλ“λ³„ μ—­ν• 

| λ…Έλ“ | μ—­ν•  | μ±…μ„ |
|------|------|------|
| **Planner** | μ „λµ μλ¦½ | κ²€μƒ‰ μΏΌλ¦¬ μƒμ„± (2~4κ°), κΉμ΄ κ²°μ • |
| **Searcher** | μ›Ή κ²€μƒ‰ | Tavily κ²€μƒ‰, URL λ©λ΅ μμ§‘ |
| **ContentReader** | λ³Έλ¬Έ μ½κΈ° | URL λ‚΄μ© μ¤ν¬λν•‘ (μƒμ„ 3κ°) |
| **Analyzer** | ν’μ§ νλ‹¨ | μ •λ³΄ λ¶„μ„, μ¶”κ°€ κ²€μƒ‰ μ—¬λ¶€ κ²°μ • |
| **Writer** | μµμΆ… μ‘λ‹µ | μμ§‘λ λ¨λ“  μ •λ³΄ μΆ…ν•©ν•μ—¬ ν•κµ­μ–΄ μ‘λ‹µ |

### λ…Έλ“ μƒμ„Έ

#### π― Planner
```
Input:  "LangGraph λΉ„μ „ AI κ΄€λ ¨ λ…Όλ¬Έ"
Output: {
  "search_queries": [
    "LangGraph Vision AI paper",
    "LangGraph computer vision",
    "LangGraph image processing"
  ],
  "depth_level": 3
}
```
- κ²€μƒ‰ μ „λµμ„ λ―Έλ¦¬ κ³„ν
- λ‹¤μ–‘ν• κ°λ„μ μΏΌλ¦¬ μƒμ„±

#### π” Searcher
```
Input:  query = "LangGraph Vision AI paper"
Output: {
  "urls_to_read": ["arxiv.org/...", "linkedin.com/..."],
  "search_results": [...]
}
```
- Tavily APIλ΅ μ›Ή κ²€μƒ‰
- μƒμ„ 5κ° URL μ¶”μ¶

#### π“– ContentReader
```
Input:  urls = ["arxiv.org/abs/2412.03801"]
Output: {
  "read_contents": [{
    "url": "arxiv.org/...",
    "content": "λ…Όλ¬Έ μ „μ²΄ ν…μ¤νΈ (4000μ)..."
  }]
}
```
- μ‹¤μ  URL λ°©λ¬Έν•μ—¬ λ³Έλ¬Έ μ¤ν¬λν•‘
- Tavily μ”μ•½μ΄ μ•„λ‹ **μ‹¤μ  λ‚΄μ©** μμ§‘

#### π”¬ Analyzer
```
Input:  findings, read_contents
Output: {
  "findings": ["VLAM λ…Όλ¬Έ λ°κ²¬", "AgCV ν”„λ μ„μ›ν¬..."],
  "needs_more_research": true,
  "next_search_query": "LangGraph vision implementation"
}
```
- μμ§‘λ μ •λ³΄ λ¶„μ„
- μ¶©λ¶„ μ—¬λ¶€ νλ‹¨ β†’ μ¶”κ°€ κ²€μƒ‰ λλ” Writer μ „λ‹¬
- **μµλ€ 3ν** λ°λ³µ μ ν•

#### βοΈ Writer
```
Input:  λ¨λ“  findings + read_contents
Output: κµ¬μ΅°ν™”λ ν•κµ­μ–΄ μ‘λ‹µ
```
- λ¨λ“  λ¦¬μ„μΉ κ²°κ³Ό μΆ…ν•©
- ν•µμ‹¬ μ”μ•½ / μƒμ„Έ λ¶„μ„ / κ²°λ΅  κµ¬μ΅°

### μ¥μ 
- β… **κΉμ΄ μλ” λ¦¬μ„μΉ**: λ°λ³µ κ²€μƒ‰ + λ³Έλ¬Έ ν™•μΈ
- β… **μ—­ν•  λ¶„λ¦¬**: κ° λ…Έλ“κ°€ ν• κ°€μ§€ μ—­ν• λ§
- β… **ν’μ§ κ΄€λ¦¬**: Analyzerκ°€ μ¶©λ¶„μ„± νλ‹¨
- β… **ν™•μ¥μ„±**: μƒ λ…Έλ“ μ¶”κ°€ μ©μ΄
- β… **μ•μ „μ„±**: λ°λ³µ μ ν• (μµλ€ 3ν)

### λ‹¨μ 
- β **λ³µμ΅μ„± μ¦κ°€**: 5κ° λ…Έλ“ κ΄€λ¦¬
- β **μ‘λ‹µ μ‹κ°„**: λ°λ³µ κ²€μƒ‰μΌλ΅ λλ ¤μ§ μ μμ
- β **λΉ„μ© μ¦κ°€**: LLM νΈμ¶ νμ μ¦κ°€
- β **λ””λ²„κΉ… μ–΄λ ¤μ›€**: νλ¦„ μ¶”μ  λ³µμ΅

---

## 4. State λ³€κ²½ λΉ„κµ

### μ΄μ „ State

```python
class AgentState(TypedDict):
    messages: Annotated[Sequence[BaseMessage], add_messages]
    next: str
    research_count: int
    research_topic: Optional[str]
```

### μƒ State

```python
class DeepResearchState(TypedDict):
    messages: Annotated[Sequence[BaseMessage], add_messages]
    next: str
    
    # κ³„ν
    research_plan: Optional[ResearchPlan]
    current_query_index: int
    
    # κ²€μƒ‰
    search_results: List[dict]
    urls_to_read: List[str]
    
    # λ³Έλ¬Έ μ½κΈ°
    read_contents: List[ReadContent]
    
    # λ¶„μ„
    findings: List[str]
    needs_more_research: bool
    next_search_query: Optional[str]
    research_iteration: int
```

---

## 5. νλ¦„ λΉ„κµ

### μ΄μ „ νλ¦„ (λ‹¨μ)
```
μ§λ¬Έ β†’ Supervisor β†’ Researcher β†’ Supervisor β†’ Writer β†’ FINISH
         (1ν)        (1ν)        (1ν)
```

### μƒ νλ¦„ (λ°λ³µ κ°€λ¥)
```
μ§λ¬Έ β†’ Planner β†’ Searcher β†’ ContentReader β†’ Analyzer
                    β†‘                           β”‚
                    β””β”€β”€β”€ (λ¶€μ΅±ν•λ©΄ λ°λ³µ) β”€β”€β”€β”€β”€β”€β”€β”€β”
                                                β”‚
                                    (μ¶©λ¶„ν•λ©΄) β†’ Writer β†’ END
```

---

## 6. μ”μ•½

| ν•­λ© | μ΄μ „ (3λ…Έλ“) | ν„μ¬ (5λ…Έλ“) |
|------|------------|-------------|
| κµ¬μ΅° | λ‹¨μ | λ³µμ΅ |
| κ²€μƒ‰ κΉμ΄ | μ–•μ | κΉμ |
| URL λ³Έλ¬Έ | λ―Έν™•μΈ | ν™•μΈ |
| λ°λ³µ κ²€μƒ‰ | μ ν•μ  | μ²΄κ³„μ  |
| ν’μ§ κ΄€λ¦¬ | μ—†μ | Analyzer |
| μ‘λ‹µ μ‹κ°„ | λΉ λ¦„ | λλ¦Ό |
| λΉ„μ© | λ‚®μ | λ†’μ |
| ν™•μ¥μ„± | λ‚®μ | λ†’μ |

> π’΅ **κ²°λ΅ **: κ°„λ‹¨ν• μ§λ¬Έμ—λ” μ΄μ „ κµ¬μ΅°κ°€ ν¨μ¨μ μ΄μ§€λ§, 
> κΉμ΄ μλ” λ¦¬μ„μΉκ°€ ν•„μ”ν• κ²½μ° μƒ μ•„ν‚¤ν…μ²κ°€ ν•„μμ μ…λ‹λ‹¤.
