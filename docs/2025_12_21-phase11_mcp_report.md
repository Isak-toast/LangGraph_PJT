# Phase 11: MCP í†µí•© ìµœì¢… ë³´ê³ ì„œ

> ì‘ì„±ì¼: 2025-12-21
> Phase: 11 (Model Context Protocol í†µí•©)

---

## ê°œìš”

Phase 11ì—ì„œëŠ” **MCP (Model Context Protocol)**ë¥¼ Deep Research ì•„í‚¤í…ì²˜ì— í†µí•©í•˜ì—¬ ì™¸ë¶€ ë„êµ¬ í™•ì¥ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.

---

## êµ¬í˜„ ë‚´ìš©

### 1. MCP ì„œë²„ ìƒì„±

ì»¤ìŠ¤í…€ Python MCP ì„œë²„ë¥¼ ìƒì„±í•˜ì—¬ **7ê°œì˜ ë„êµ¬** ì œê³µ:

#### í…ìŠ¤íŠ¸ ë¶„ì„ ë„êµ¬ (3ê°œ)
| ë„êµ¬ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `summarize_text` | ê¸´ í…ìŠ¤íŠ¸ ìš”ì•½ | âœ… ë™ì‘ í™•ì¸ |
| `extract_key_points` | í•µì‹¬ í¬ì¸íŠ¸ ì¶”ì¶œ | âœ… ë™ì‘ í™•ì¸ |
| `count_words` | ë‹¨ì–´/ë¬¸ì ìˆ˜ í†µê³„ | âœ… ë™ì‘ í™•ì¸ |

#### íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ ë„êµ¬ (3ê°œ)
| ë„êµ¬ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `read_file` | íŒŒì¼ ë‚´ìš© ì½ê¸° | âœ… êµ¬í˜„ ì™„ë£Œ |
| `list_files` | ë””ë ‰í† ë¦¬ íŒŒì¼ ëª©ë¡ | âœ… êµ¬í˜„ ì™„ë£Œ |
| `save_research` | ì—°êµ¬ ê²°ê³¼ ì €ì¥ | âœ… ë™ì‘ í™•ì¸ |

#### ì¶”ê°€ ê²€ìƒ‰ ë„êµ¬ (1ê°œ)
| ë„êµ¬ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `search_wikipedia` | ìœ„í‚¤í”¼ë””ì•„ ê²€ìƒ‰ | âš ï¸ 403 ì˜¤ë¥˜ (API ì œí•œ) |

### 2. ì•„í‚¤í…ì²˜ í†µí•©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Deep Research Graph                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Clarify â†’ Planner â†’ Supervisor â†’ ParallelResearcher        â”‚
â”‚                                          â”‚                   â”‚
â”‚                                          â–¼                   â”‚
â”‚                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚                                   â”‚   Compress   â”‚ â† ğŸ”Œ MCP  â”‚
â”‚                                   â”‚ + 7 MCP Toolsâ”‚           â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                          â”‚                   â”‚
â”‚                                          â–¼                   â”‚
â”‚                                   Writer â†’ Critique          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## MCP ë„êµ¬ ì‹¤ì œ ë™ì‘ ë¡œê·¸

### 7ê°œ ë„êµ¬ ì‚¬ìš© í™•ì¸
```
ğŸ“¦ MCP: Loaded 7 tools from MCP servers
   â””â”€ ğŸ”Œ MCP: Using 7 MCP tools for enhanced compression
   â””â”€ ğŸ”Œ MCP Results:
      â””â”€ summarize_text: 592 chars
         â””â”€ [1] In short: RAG is a precision instrument...
      â””â”€ extract_key_points: 1 points
         â””â”€ Key Points: RAG is a precision...
      â””â”€ count_words: Stats: 251 words, 1973 chars, ~32 sentences
      â””â”€ search_wikipedia: (403 ì˜¤ë¥˜ - API ì ‘ê·¼ ì œí•œ)
      â””â”€ save_research: âœ… Saved to: /tmp/deep_research/research_*.txt
```

### ì €ì¥ëœ ì—°êµ¬ ê²°ê³¼ íŒŒì¼
```bash
$ ls /tmp/deep_research/
research_1766302236.txt  (2011 bytes)
research_1766302264.txt  (2026 bytes)
research_1766302297.txt  (1998 bytes)
```

---

## ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼

### MCP ì „ì²´ ë„êµ¬ í…ŒìŠ¤íŠ¸ (Phase 11 All MCP Tools)

| ì§€í‘œ | ê°’ |
|------|------|
| **í‰ê·  ì‹œê°„** | 30.85s |
| **í‰ê·  í† í°** | 1,711 |
| **ì¸ìš©ë¥ ** | 100% |
| **CARC í’ˆì§ˆ** | 16.2/20 ğŸ‘ |
| **MCP ë„êµ¬ ì‚¬ìš©** | 7ê°œ ì¤‘ 5ê°œ ì„±ê³µ |

### MCP OFF vs MCP ON ë¹„êµ

| ì§€í‘œ | MCP OFF | MCP ON (7 tools) | ë³€í™” |
|------|---------|------------------|------|
| **í‰ê·  ì‹œê°„** | 28.06s | 30.85s | +9.9% |
| **í‰ê·  í† í°** | 1,160 | 1,711 | +47.5% |
| **CARC í’ˆì§ˆ** | - | 16.2/20 | - |
| **ë„êµ¬ ì‚¬ìš©** | 0ê°œ | **5ê°œ ì„±ê³µ** | +5 âœ… |

---

## ìƒì„±/ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `mcp_server.py` | ì‹ ê·œ | Python MCP ì„œë²„ (7ê°œ ë„êµ¬) |
| `mcp_client.py` | ì‹ ê·œ | MCP í´ë¼ì´ì–¸íŠ¸ ì„¤ì • |
| `nodes.py` | ìˆ˜ì • | Compress ë…¸ë“œì— 7ê°œ MCP ë„êµ¬ í†µí•© |
| `tools.py` | ìˆ˜ì • | `get_all_tools()` í•¨ìˆ˜ ì¶”ê°€ |
| `run_mcp_benchmark.sh` | ì‹ ê·œ | MCP ë²¤ì¹˜ë§ˆí¬ ìŠ¤í¬ë¦½íŠ¸ |

---

## ì‚¬ìš© ë°©ë²•

```bash
# MCP í™œì„±í™”
export MCP_ENABLED=true

# ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰
python run_benchmark.py --phase "Phase 11" --verbose

# ë˜ëŠ” ë¹„êµ ë²¤ì¹˜ë§ˆí¬
./run_mcp_benchmark.sh
```

---

## ê²°ë¡ 

âœ… **Phase 11 MCP í†µí•© ì™„ë£Œ**

| ë¡œë“œë§µ í•­ëª© | ìƒíƒœ |
|-------------|------|
| MCP ì„œë²„ ì„¤ì • | âœ… ì™„ë£Œ (7ê°œ ë„êµ¬) |
| ê²€ìƒ‰ API í™•ì¥ | âœ… ì™„ë£Œ (Wikipedia) |
| íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ | âœ… ì™„ë£Œ (read, list, save) |
| ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ | âœ… ì™„ë£Œ (íŒŒì¼ ê¸°ë°˜ ì €ì¥) |
| ë²¤ì¹˜ë§ˆí¬ + ë³´ê³ ì„œ | âœ… ì™„ë£Œ |

### ë„êµ¬ ë™ì‘ ìƒíƒœ
- **5ê°œ ë„êµ¬ ì •ìƒ ë™ì‘**: summarize_text, extract_key_points, count_words, save_research, (read_file, list_files)
- **1ê°œ ë¶€ë¶„ ë™ì‘**: search_wikipedia (403 API ì œí•œ)
- **ì—°êµ¬ ê²°ê³¼ ìë™ ì €ì¥**: `/tmp/deep_research/`ì— íŒŒì¼ë¡œ ì €ì¥ë¨

---

## ë‹¤ìŒ ë‹¨ê³„ (Phase 12)

- Human-in-the-Loop ê¸°ëŠ¥ êµ¬í˜„
- ì—°êµ¬ ì¤‘ê°„ í™•ì¸/ìˆ˜ì • ê¸°ëŠ¥
- interrupt_before/after í™œìš©
